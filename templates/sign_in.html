{% extends "base.html" %}
{% load socialaccount %}
{% load static %}

{% block title %}Sign In | TicketsPlease{% endblock %}

{% block extra_head %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f3f4f6;
        overflow-x: hidden;
    }
    
    .ticket-badge {
        position: relative;
        padding: 3px 10px;
        border-radius: 20px;
        display: inline-block;
        font-weight: 500;
        font-size: 12px;
    }
    
    .ticket-badge::before,
    .ticket-badge::after {
        content: "";
        position: absolute;
        top: 50%;
        width: 10px;
        height: 10px;
        background: #f3f4f6;
        border-radius: 50%;
    }
    
    .ticket-badge::before {
        left: -5px;
    }
    
    .ticket-badge::after {
        right: -5px;
    }
    
    .luggage-animation {
        animation: float 6s ease-in-out infinite;
    }
    
    .ticket-animation {
        animation: float 5s ease-in-out infinite;
    }
    
    .plane-animation {
        animation: floatRight 8s ease-in-out infinite;
    }
    
    .bounce {
        animation: bounce 2s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }
    
    @keyframes floatRight {
        0%, 100% { transform: translateX(0); }
        50% { transform: translateX(-10px); }
    }
    
    @keyframes bounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    .input-icon:focus-within {
        border-color: var(--ocean);
        box-shadow: 0 0 0 3px rgba(1, 50, 76, 0.2);
    }
    
    .perforated-border {
        position: relative;
    }
    
    .perforated-border::before {
        content: '';
        position: absolute;
        top: -10px;
        left: 0;
        right: 0;
        height: 20px;
        background-image: radial-gradient(circle at 10px 0px, transparent 8px, #fff 8px);
        background-size: 20px 20px;
        background-position: 0 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Background elements -->
<div class="fixed inset-0 overflow-hidden -z-10">
    <div class="absolute -top-20 -left-20 w-64 h-64 bg-blue-400 rounded-full opacity-10"></div>
    <div class="absolute top-1/4 -right-12 w-96 h-96 bg-orange-300 rounded-full opacity-10"></div>
    <div class="absolute bottom-0 left-1/3 w-40 h-40 bg-blue-500 rounded-full opacity-10"></div>
    
    <!-- Floating tickets -->
    <div class="absolute top-10 right-20 transform rotate-12 ticket-animation">
        <div class="bg-orange-500 text-white p-3 rounded-lg w-24 h-32 shadow-lg flex items-center justify-center">
            <i class="fas fa-ticket-alt text-3xl transform rotate-90"></i>
        </div>
    </div>
    <div class="absolute bottom-40 left-10 transform -rotate-6 ticket-animation">
        <div class="bg-blue-500 text-white p-3 rounded-lg w-24 h-32 shadow-lg flex items-center justify-center">
            <i class="fas fa-ticket-alt text-3xl transform rotate-90"></i>
        </div>
    </div>
    <div class="absolute top-80 left-20 transform rotate-3 ticket-animation">
        <div class="bg-[var(--ocean)] text-white p-3 rounded-lg w-24 h-32 shadow-lg flex items-center justify-center">
            <i class="fas fa-ticket-alt text-3xl text-[var(--sunset)] transform rotate-90"></i>
        </div>
    </div>
    
    <!-- Plane icon flying across the screen -->
    <div class="absolute top-1/4 left-0 plane-animation">
        <i class="fas fa-plane text-blue-400 text-2xl"></i>
    </div>
</div>

<div class="container mx-auto px-4 py-8 min-h-screen flex flex-col md:flex-row items-center justify-center">
    <!-- Left Column (Welcome Section) -->
    <div class="md:w-1/2 flex flex-col items-center md:items-start md:pr-16 mb-10 md:mb-0">
        <div class="text-[var(--ocean)] font-bold text-4xl md:text-5xl flex items-center mb-6 bounce">
            <span class="mr-2">TicketsPlease</span>
            <i class="fas fa-ticket-alt text-[var(--sunset)]"></i>
        </div>
        <p class="text-gray-600 text-lg mb-8 text-center md:text-left">
            Welcome back! Sign in to access your travel dashboard.
            Store, organize, and access all your travel tickets and reservations in one place.
            From museums to flights, your digital luggage for every journey.
        </p>
        
        <div class="relative luggage-animation">
            <div class="w-60 h-80 bg-[var(--ocean)] rounded-2xl flex items-center justify-center">
                <!-- Luggage handle -->
                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-20 h-6 bg-[var(--sunset)] rounded-t-full"></div>
                
                <!-- Luggage details -->
                <div class="absolute top-4 left-4 right-4 bottom-4 bg-white rounded-xl p-4 flex flex-col justify-between">
                    <!-- Luggage logo -->
                    <div class="flex justify-center">
                        <div class="w-16 h-16 rounded-full bg-[var(--sunset)] flex items-center justify-center text-white font-bold text-2xl">TP</div>
                    </div>
                    
                    <!-- Ticket items -->
                    <div class="space-y-3 mt-4">
                        <div class="bg-blue-50 p-3 rounded-lg flex items-center">
                            <i class="fas fa-plane-departure text-blue-500 mr-3"></i>
                            <span class="text-sm font-medium">Paris → London</span>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg flex items-center">
                            <i class="fas fa-hotel text-orange-500 mr-3"></i>
                            <span class="text-sm font-medium">Grand Hotel</span>
                        </div>
                        <div class="bg-green-50 p-3 rounded-lg flex items-center">
                            <i class="fas fa-train text-green-500 mr-3"></i>
                            <span class="text-sm font-medium">Eurostar #9043</span>
                        </div>
                    </div>
                    
                    <!-- Ticket badges -->
                    <div class="flex flex-wrap gap-2 mt-4">
                        <div class="ticket-badge bg-blue-400 text-white">Flights</div>
                        <div class="ticket-badge bg-green-400 text-white">Trains</div>
                        <div class="ticket-badge bg-blue-400 text-white">Hotels</div>
                        <div class="ticket-badge bg-orange-400 text-white">Events</div>
                        <div class="ticket-badge bg-blue-300 text-white">Rentals</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Right Column (Sign In Form) -->
    <div class="md:w-1/2 max-w-md w-full">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden perforated-border">
            <div class="bg-gradient-to-r from-[var(--ocean)] to-[var(--ocean-light)] p-6">
                <h2 class="text-2xl font-bold text-white text-center">Sign in to Your Account</h2>
                <p class="text-blue-100 text-center">Access your travel tickets anywhere</p>
            </div>
            
            <div class="p-8">
                <form action="{% url 'account_login' %}" method="POST">
                    {% csrf_token %}
                    <div class="mb-6">
                        <label class="block text-gray-700 mb-2" for="email">Email Address</label>
                        <div class="relative input-icon rounded-lg border border-gray-300 overflow-hidden transition-all duration-300">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <i class="fas fa-envelope text-gray-400"></i>
                            </div>
                            <input id="email" name="login" type="email" autocomplete="email" required class="w-full pl-10 pr-4 py-3 rounded-lg focus:outline-none focus:ring-0" placeholder="your.email@example.com">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 mb-2" for="password">Password</label>
                        <div class="relative input-icon rounded-lg border border-gray-300 overflow-hidden transition-all duration-300">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <i class="fas fa-lock text-gray-400"></i>
                            </div>
                            <input id="password" name="password" type="password" autocomplete="current-password" required class="w-full pl-10 pr-4 py-3 rounded-lg focus:outline-none focus:ring-0" placeholder="••••••••">
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center">
                            <input id="remember-me" name="remember" type="checkbox" class="h-4 w-4 text-[var(--ocean)] focus:ring-[var(--ocean)] border-gray-300 rounded">
                            <label for="remember-me" class="ml-2 text-gray-700">Remember me</label>
                        </div>
                        <a href="{% url 'account_reset_password' %}" class="text-[var(--ocean)] hover:text-[var(--ocean-light)] font-medium transition-colors">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="w-full bg-[var(--ocean)] hover:bg-[var(--ocean-light)] text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                        <i class="fas fa-luggage-cart mr-2"></i>Sign In
                    </button>
                </form>
                
                <div class="relative flex items-center my-6">
                    <div class="flex-grow border-t border-gray-300"></div>
                    <span class="flex-shrink mx-4 text-gray-600">or continue with</span>
                    <div class="flex-grow border-t border-gray-300"></div>
                </div>
                
                <div class="space-y-3">
                    <!-- Bouton Google encore plus simple (test de résolution de problème) -->
                    <a href="/accounts/google/login/?process=login" class="w-full flex items-center justify-center py-3 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        Sign in with Google
                    </a>
                </div>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        Don't have an account?
                        <a href="{% url 'account_signup' %}" class="text-[var(--ocean)] font-medium hover:text-[var(--ocean-light)] transition-colors">Sign up</a>
                    </p>
                </div>
            </div>
        </div>
        
        <div class="mt-6 text-center">
            <div class="flex items-center justify-center space-x-4">
                <button class="text-gray-600 hover:text-gray-900 transition-colors">
                    <i class="fab fa-apple text-2xl"></i>
                </button>
                <button class="text-gray-600 hover:text-gray-900 transition-colors">
                    <i class="fab fa-android text-2xl"></i>
                </button>
                <button class="text-gray-600 hover:text-gray-900 transition-colors">
                    <i class="fab fa-windows text-2xl"></i>
                </button>
            </div>
            <p class="mt-2 text-sm text-gray-600">Download our app for all platforms</p>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-white border-t border-gray-200 py-6 mt-auto">
    <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
            <div class="text-gray-600 mb-4 md:mb-0">
                © 2025 TicketsPlease. All your travel tickets in one place.
            </div>
            <div class="flex space-x-6">
                <a href="#" class="text-gray-500 hover:text-[var(--sunset)] transition-colors">
                    <i class="fab fa-facebook"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-[var(--sunset)] transition-colors">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-[var(--sunset)] transition-colors">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-[var(--sunset)] transition-colors">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </div>
    </div>
</footer>

<script>
    // Add hover effect to luggage SVG
    const luggage = document.querySelector('.luggage-animation');
    luggage.addEventListener('mouseenter', () => {
        luggage.style.transform = 'rotate(-5deg)';
    });
    
    luggage.addEventListener('mouseleave', () => {
        luggage.style.transform = '';
    });
</script>
{% endblock %}
